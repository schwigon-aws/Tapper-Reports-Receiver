#! /usr/bin/perl
# PODNAME: tapper-reports-receiver-daemon
# ABSTRACT: cmdline frontend to Tapper::Reports::Receiver::Daemon

use strict;
use warnings;
use Log::Log4perl;

use Tapper::Reports::Receiver;

use App::Daemon 'daemonize';
$App::Daemon::as_user = "root";
$App::Daemon::logfile = $ENV{HARNESS_ACTIVE} ? "/tmp/tapper-reports-receiver-daemon.log"
                                             : "/var/log/tapper-reports-receiver-daemon.log";
$App::Daemon::pidfile = "/tmp/tapper-reports-receiver-daemon.pid";

daemonize();
my $port = Tapper::Config->subconfig->{report_port};
Tapper::Reports::Receiver->new()->run($port);
